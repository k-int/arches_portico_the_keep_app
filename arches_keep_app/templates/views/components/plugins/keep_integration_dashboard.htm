{% load i18n %}

<style>
    h1 {
        font-size: 2em;
        font-weight: bold;
        margin: 6px 0 16px;
    }

    h2 {
        font-size: 1.5em;
        font-weight: bold;
        margin: 24px 0 16px;
    }

    .online {
        color: green;
        font-weight: bold;
    }

    #kint-logo {
        width: 175px;
    }

    #arches-logo {
        width: 300px;
        height: 65%;
        padding-left: 35px;
    }

    .dashboard-page {
        background-color: #fff;
        color: #386ea4;
        border: solid 0px red;
        width: 100%;
        height: 100%;
        padding-left: 100px;
        padding-top: 50px;

        display: flex;
        flex-direction: column;
        justify-content: space-between;
    }

    .dashboard-container {
        border: solid 0px green;
        display: flex;
        flex-direction: column;
        justify-content: start;
    }

    .logos-row {
        border: solid 0px blue;
        padding-bottom: 25px;
        display: flex;
        justify-content: start;
        align-items: center;
    }

    .dashboard-header {
        border: solid 0px blue;
        width: 100%;
    }

    .dashboard-body {
        border: solid 0px blue;
        width: 100%;
    }

    .error-msg {
        color: red;
        font-weight: bold;
        padding-bottom: 5px;
    }

    .input-label {
        padding-bottom: 10px;
        display: block;
    }

    .input-label-span {
        border: solid 0px red;
        min-width: 75px;
        display: inline-block;
    }

    .loading-spinner {
        font-size: 2em;
        margin-left: 20px;
}

</style>

<div class="dashboard-page">

    <div class="dashboard-container">
        <div class="dashboard-header">
            <h1>Arches-Portico Keep Integration Dashboard</h1>
            <p>The Arches-Portico Keep application provides an extract of Arches data for updating the Keep database. Select the relevant dates below and press the Download button to produce an XML export in a new tab.</p>
        </div>

        <div class="dashboard-body">

            <h2>Download latest changes:</h2>
            <form data-bind="submit: onSubmit">
                <label class="input-label">
                    <span class = "input-label-span">Start date</span>
                    <input type="date" data-bind="value: selectedStartDate" , id="dateFrom" name="dateFrom">
                </label>
                <label class="input-label">
                    <span class = "input-label-span">End date</span>
                    <input type="date" data-bind="value: selectedEndDate" id="dateTo" name="dateTo">
                </label>
                <p data-bind="text: errorMsg, visible: errorMsg" class = "error-msg"></p>
                <ul data-bind="foreach: loadingInfo, visible: loadingInfo().length > 0" class="loading-info">
                    <li data-bind="text: $data"></li>
                </ul>
                <button data-bind="visible: !loading()" class="btn btn-primary" type="submit">Download</button>
                <i data-bind="visible: loading()" class="fa fa-spin fa-spinner loading-spinner"></i>
            </form>

        </div>
    </div>

    <div class="logos-row">
        <img src="../../../../media/img/k-int logo abbr (transparent).png" alt="K-int logo" id="kint-logo">
        <img src="../../../../media/img/arches_logo.png" alt="Arches logo" id="arches-logo">
    </div>
</div>